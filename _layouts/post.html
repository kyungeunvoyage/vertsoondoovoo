---
layout: default
---

{%-include back_link.html-%}

<article>
  <p class="post-meta">
    <time datetime="{{ page.date }}">{{ page.date | date: site.theme_config.date_format }}</time>
  </p>

  <h1>{{ page.title }}</h1>

  {% if page.spotifyId %}
  <aside class="spotify">
    <div>
      <br/>
      <iframe width="100%" height="380" frameborder="0" allowtransparency="true"
      src="https://open.spotify.com/embed/{{ page.spotifyType }}/{{ page.spotifyId }}?utm_source=generator"></iframe>
    </div>
  </aside>
  {% endif %}

  {{ content }}

  <div style="margin-top: 40px;"></div> <div id="cusdis_thread"
    data-host="https://cusdis.com"
    data-app-id="09934298-70a8-466a-8057-f8ac6a3a0a81"
    data-page-id="{{ page.url }}"
    data-page-url="{{ site.url }}{{ page.url }}"
    data-page-title="{{ page.title }}"
    data-theme="dark" ></div>

  <script async defer src="https://cusdis.com/js/cusdis.es.js"></script>
</article>

<script>
  const observer = new MutationObserver((mutations) => {
    mutations.forEach((mutation) => {
      if (mutation.addedNodes.length === 0) return;

      const iframe = mutation.addedNodes[0];
      if (iframe.tagName !== 'IFRAME') return;

      const additionalStyles = `
        /* 1. 닉네임, 이메일, 댓글 입력 필드의 배경색과 입력 텍스트 색상 변경 */
        input[type="text"],
        input[type="email"],
        textarea {
          background-color: #242424 !important;
          color: #e0e0e0 !important;
          border-color: #555555 !important;
        }

        /* 2. 'Nickname', 'Email (optional)', 'Reply...' 등의 레이블 배경 및 텍스트 색상 변경 (강력한 선택자로 변경) */
        .cusdis-widget .cusdis-form-item__label {
          color: #e0ee0e !important; /* 색상 적용 문제 해결을 위해 !important 유지 */
          background-color: #546a3a !important;
          padding: 4px 8px;
          border-radius: 4px;
        }

        /* 3. 댓글 입력 칸(Reply/Textarea)의 너비를 줄이는 강화된 코드 */
        .cusdis-form-container, .cusdis-form {
          max-width: 450px !important;
          width: 100% !important;
        }
        textarea {
          width: 100% !important;
          box-sizing: border-box !important;
        }

        /* 4. 이메일 입력 필드가 있는 폼 그룹 전체를 숨깁니다. */
        input[type="email"] {
          display: none !important;
        }
        .cusdis-form-item:has(input[type="email"]) {
          display: none !important;
        }
      `;

      iframe.srcdoc = iframe.srcdoc.replace('</style>', additionalStyles + '</style>');
    });
  });

  const cusdisThread = document.getElementById("cusdis_thread");
  if (cusdisThread) {
    observer.observe(cusdisThread, {
      childList: true,
      subtree: true
    });
  }
</script>
